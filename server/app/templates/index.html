<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B Team Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="bg-neutral-900 text-neutral-100 h-screen flex">
    <!-- Sidebar Wrapper with Alpine.js -->
    <div x-data="{ open: true }" class="flex h-screen">
        <!-- Sidebar -->
        <aside 
            class="bg-neutral-950 shadow-lg p-4 flex flex-col space-y-4 transition-all duration-300" 
            :class="open ? 'w-64' : 'w-16'"
        >
            <!-- Sidebar Header -->
            <div class="flex items-center justify-between">
                <h2 x-show="open" class="text-xl font-bold text-white">B Team Chat</h2>
                <button @click="open = !open" class="text-white bg-neutral-800 p-2 rounded-lg">
                    â˜°
                </button>
            </div>

            <nav class="flex flex-col space-y-2">
                <a href="#" class="p-2 bg-neutral-950 text-neutral-300 rounded hover:bg-neutral-600" x-show="open">New Chat</a>
                <a href="#" class="p-2 bg-neutral-950 text-neutral-300 rounded hover:bg-neutral-600" x-show="open">Dashboard</a>
                <a href="#" class="p-2 bg-neutral-950 text-neutral-300 rounded hover:bg-neutral-600" x-show="open">History</a>
                <a href="#" class="p-2 bg-neutral-950 text-neutral-300 rounded hover:bg-neutral-600" x-show="open">Settings</a>
            </nav>
        </aside>
    </div>
        
        <!-- Main Chat Area -->
        <main class="flex-1 flex flex-col h-screen">
            <div class="flex-1 p-4 overflow-auto flex flex-col-reverse">
                <!-- Messages -->
                <div class="space-y-4">
                    <div id="response" class="bg-blue-500 text-white p-3 rounded-lg w-3/4 ml-auto"></div>
                </div>
            </div>

            <!-- Message Input -->
            <div class="p-4 bg-neutral-950 shadow-md flex">
                <input type="text" id="prompt" placeholder="Type a message..." class="flex-1 p-2 border border-neutral-600 rounded-lg bg-neutral-700 text-white">
                <button onclick="sendRequest()" class="ml-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">Send</button>
            </div>
        </main>


        <script>
            async function sendRequest() {
                const prompt = document.getElementById("prompt").value;
                const responseElement = document.getElementById("response");
    
                try {
                    const response = await fetch("http://127.0.0.1:8001/suggestion", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ prompt: prompt })
                    });
                    const data = await response.json();
                    responseElement.innerText = data.suggestions ? data.suggestions[0] : "No response";
                } catch (error) {
                    responseElement.innerText = "Error: " + error;
                }
            }
        </script>
</body>
</html>
